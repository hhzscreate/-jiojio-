{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/98630/Desktop/shixun/融合/点餐/点餐/pages/index/index.vue?a153","webpack:///C:/Users/98630/Desktop/shixun/融合/点餐/点餐/pages/index/index.vue?44d0","webpack:///C:/Users/98630/Desktop/shixun/融合/点餐/点餐/pages/index/index.vue?199f","webpack:///C:/Users/98630/Desktop/shixun/融合/点餐/点餐/pages/index/index.vue?8f99","uni-app:///pages/index/index.vue","webpack:///C:/Users/98630/Desktop/shixun/融合/点餐/点餐/pages/index/index.vue?ac3d","webpack:///C:/Users/98630/Desktop/shixun/融合/点餐/点餐/pages/index/index.vue?3c2a"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,4F;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AACqM;AACrM,gBAAgB,wMAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC7CA;AAAA;AAAA;AAAA;AAA+vB,CAAgB,svBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACmKnxB,gD;;;;;;;;AAQA;AACA;AACA;AACA,oBADA;AAEA,oBAFA;AAGA,8BAHA;AAIA,wBAJA;AAKA,kBALA,EAFA;;AASA,MATA,kBASA;AACA;AACA,oBADA;AAEA,cAFA,EAEA;AACA,iBAHA;AAIA,0BAJA;AAKA,iBALA;AAMA,gCANA;AAOA,0BAPA;AAQA,0BARA;AASA,uBATA;AAUA;AACA,oBAXA;AAYA,yBAZA;AAaA,iBAbA;;AAeA,GAzBA;AA0BA;AACA;AACA,kBAFA,4BAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SALA,EAKA,CALA;AAMA,KAVA,EA1BA;;AAsCA,QAtCA,oBAsCA;AACA,kBADA,GACA,MADA;AAEA;;AAEA;AACA;;;AAGA;AACA;AATA,uCAUA,mCAVA,QAUA,GAVA;AAWA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,wEAzBA;AA0BA,GAhEA;;AAkEA;AACA;AACA,QApEA,oBAoEA;AACA;AACA;AACA;AACA;AACA,GAzEA;;AA2EA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAnCA,0BAmCA,SAnCA,EAmCA;AACA;AACA,KArCA;;AAuCA,mBAvCA,6BAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CADA;;AAGA,SAJA,MAIA;AACA;AACA;AACA,OARA;AASA;AACA;AACA,uBADA;AAEA,gCAFA;AAGA,iBAHA,mBAGA,GAHA,EAGA;AACA;AACA;AACA,mCADA;;AAGA;AACA,WATA;;AAWA;;;AAGA,KAzEA;AA0EA,mBA1EA,2BA0EA,OA1EA,EA0EA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,OANA;;AAQA;AACA;AACA;AACA;;AAEA;AACA,sBADA;AAEA,oCAFA;AAGA,0BAHA;AAIA,4BAJA;AAKA,mCALA;AAMA,oCANA;AAOA,oCAPA;AAQA,oDARA;;AAUA,KAlGA;AAmGA,uBAnGA,+BAmGA,OAnGA,EAmGA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA9GA;AA+GA,0BA/GA,kCA+GA,OA/GA,EA+GA;AACA;AACA;AACA;AACA,OAHA;AAIA;AACA;AACA,uBADA;AAEA,gCAFA;AAGA,iBAHA,mBAGA,GAHA,EAGA;AACA;AACA;AACA,mCADA;;AAGA;AACA,WATA;;AAWA;;AAEA,KAlIA;AAmIA,0BAnIA,kCAmIA,OAnIA,EAmIA;AACA;AACA;AACA,KAtIA;AAuIA,2BAvIA,qCAuIA;AACA;AACA;AACA,KA1IA;AA2IA,wBA3IA,kCA2IA;AACA;AACA,KA7IA;AA8IA,aA9IA,uBA8IA;AACA;AACA,KAhJA;AAiJA;AACA,sBAlJA,8BAkJA,EAlJA,EAkJA;AACA;AACA;AACA;AACA,KAtJA;AAuJA,kBAvJA,gCAuJA;AACA,eADA,GACA,MADA,CACA,SADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAhKA;;AAkKA;AACA,YAnKA,sBAmKA;AACA;AACA;AACA;AACA,kBADA;AAEA;AACA;AACA;AACA,OALA,EAKA,IALA;;AAOA;AACA;AACA;AACA,oBADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SARA,EAQA,IARA;AASA,OAXA;AAYA,KAzLA;AA0LA,OA1LA,iBA0LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BADA;;AAGA,KAnMA,EA3EA,E;;;;;;;;;;;;;AC3KA;AAAA;AAAA;AAAA;AAAi4C,CAAgB,4yCAAG,EAAC,C;;;;;;;;;;;ACAr5C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=57280228&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l1 = _vm.__map(_vm.categories, function(category, index) {\n    var $orig = _vm.__get_orig(category)\n\n    var l0 = _vm.__map(category.products, function(product, key) {\n      var $orig = _vm.__get_orig(product)\n\n      var m0 = _vm.productCartNum(product.id)\n      return {\n        $orig: $orig,\n        m0: m0\n      }\n    })\n\n    return {\n      $orig: $orig,\n      l0: l0\n    }\n  })\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.showSearch = true\n    }\n\n    _vm.e1 = function($event) {\n      _vm.showSearch = false\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l1: l1\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\">  <!-- 是个容器类，有container抱在一起的在大屏幕上才能显示居中的-->\r\n\t\t<view class=\"header\">\r\n\t\t\t\r\n\t\t\t<!-- 搜索栏 begin -->\r\n\t\t\t<!-- serch-box和serch-input都是在header下面自定义的 -->\r\n\t\t\t<view class=\"search-box\">\r\n\t\t\t\t<!-- tap响应的是手指触摸事件，click是点击，@实际上就是v-on，进行事件绑定 -->\r\n\t\t\t\t<!-- 后面接的就是事件，事件应该在methods中进行注册 -->\r\n\t\t\t\t<!-- 这里改变的showSearch是data中的一个变量，赋值相当于简写一个函数 -->\r\n\t\t\t\t\r\n\t\t\t\t<!-- 具体怎么操作未知！！！ -->\r\n\t\t\t\t<view class=\"search-input\" @click=\"showSearch=true\">\r\n\t\t\t\t\t<image src=\"/static/images/common/search-icon.png\" class=\"search-icon\"></image>\r\n\t\t\t\t\t<view>搜索</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 搜索栏 end -->\r\n\t\t\t\r\n\t\t\t<view class=\"center\">\r\n\t\t\t\t<view class=\"store\">\r\n\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t<image :src=\"orderType == 'takein' ? \r\n\t\t\t\t\t\t\t\t'/static/images/common/star_normal.png' : \r\n\t\t\t\t\t\t\t\t'/static/images/order/order_icon_address.png'\" \r\n\t\t\t\t\t\t\t\tclass=\"left-icon\" />\r\n\t\t\t\t\t\t<view class=\"address\">{{ orderType == 'takeout' ? address.complete_address : '来福士店' }}</view>\r\n\t\t\t\t\t\t<image src=\"/static/images/common/black_arrow_right.png\" class=\"right-icon\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- 外卖&自取switch begin -->\r\n\t\t\t\t\t<view class=\"buttons\">\r\n\t\t\t\t\t\t<button type=\"default\" class=\"button\" \r\n\t\t\t\t\t\t\t\t:class=\"{active: orderType == 'takein'}\" plain \r\n\t\t\t\t\t\t\t\thover-class=\"none\" @click=\"switchOrderType\">\r\n\t\t\t\t\t\t\t自取\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button type=\"default\" class=\"button\" \r\n\t\t\t\t\t\t\t\t:class=\"{active: orderType == 'takeout'}\" plain \r\n\t\t\t\t\t\t\t\thover-class=\"none\" @click=\"switchOrderType\">\r\n\t\t\t\t\t\t\t外卖\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 外卖&自取switch end -->\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"location\">距离您1.2km</view>\t\t\r\n\t\t\t</view>\t\r\n\t\t</view>\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t<view class=\"main\">\r\n\t\t\t<!-- 左侧菜单 begin -->\r\n\t\t\t<scroll-view class=\"menu-bar\" scroll-y scroll-with-animation>\r\n\t\t\t\t<view class=\"wrapper\">\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- 根据菜品里面的category.id来判断选择的属于哪一列 -->\r\n\t\t\t\t\t<view class=\"menu-item\" @click=\"handleMenuSelected(category.id)\" \r\n\t\t\t\t\t\t  :class=\"{active: currentCategoryId == category.id}\" v-for=\"(category, index) in categories\" :key=\"index\">\r\n\t\t\t\t\t\t<!-- <image:src=\"category.category_image_url\" class=\"image\" mode=\"widthFix\"></image> -->\r\n\t\t\t\t\t\t<view class=\"title\">{{ category.name }}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t</scroll-view>\r\n\t\t\t<!-- 左侧菜单 end -->\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t<!-- 右侧商品列表 begin -->\r\n\t\t\t<!-- scroll-view是一个组件，:scroll-top=\"productsScrollTop\"设定滑动条的顶部为当前左侧点击的(属性绑定)\r\n\t\t\t @scroll=\"productsScroll\"触发事件使得右侧滑动栏滑动 -->\r\n\t\t\t<scroll-view class=\"product-section\" scroll-y scroll-with-animation :scroll-top=\"productsScrollTop\" @scroll=\"productsScroll\">\r\n\t\t\t\t<view class=\"wrapper\">\r\n\t\t\t\t\t<!-- 商品 begin -->\r\n\t\t\t\t\t<!-- 用for循环展示 -->\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- categories是data,category, index是他里面数据项的属性 -->\r\n\t\t\t\t\t<!-- 从数据中取项目，category是一个完整的比如盖饭的全部，index是他的下标 -->\r\n\t\t\t\t\t<view class=\"products-list\" v-for=\"(category, index) in categories\" :key=\"index\" :id=\"`products-${category.id}`\">\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<!-- 展示属于左侧菜单栏的什么分类 -->\r\n\t\t\t\t\t\t<view class=\"category-name\">{{ category.name }}</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<view class=\"products\">\r\n\t\t\t\t\t\t\t<!-- 展示当前category下面的所有的商品，比如盖饭的products有哪些，且附加点击触发详情页面事件 -->\r\n\t\t\t\t\t\t\t<view class=\"product\" v-for=\"(product, key) in category.products\" :key=\"key\" \r\n\t\t\t\t\t\t\t\t@click=\"showProductDetailModal(product)\">\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<!-- 展示食物图片 -->\r\n\t\t\t\t\t\t\t\t<image :src=\"product.images[0].url\" mode=\"widthFix\" class=\"image\"></image>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t\t\t\t<!-- 未知作用 -->\r\n\t\t\t\t\t\t\t\t\t<view class=\"name\">{{ product.name }}</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<!-- 还是描述标签，内容来自于json -->\r\n\t\t\t\t\t\t\t\t\t<!-- <view class=\"labels\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"label\" \r\n\t\t\t\t\t\t\t\t\t\t:style=\"{color: label.label_color, background: $util.hexToRgba(label.label_color, 0.2)}\"\r\n\t\t\t\t\t\t\t\t\t\t v-for=\"label in product.labels\" :key=\"label.id\">{{ label.name }}</view>\r\n\t\t\t\t\t\t\t\t\t</view> -->\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<!-- 描述标签 -->\r\n\t\t\t\t\t\t\t\t\t<view class=\"description\">{{ product.description }}</view>\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<!-- 价格标签 -->\r\n\t\t\t\t\t\t\t\t\t<view class=\"price\">\r\n\t\t\t\t\t\t\t\t\t\t<view>￥{{ product.price }}</view>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t<!-- 加号按钮，是一个自定义的组件，去component中去找！ -->\r\n\t\t\t\t\t\t\t\t\t\t<!-- product.is_single是一个函数，根据结果（购物车是否为空）去判断做什么操作 -->\r\n\t\t\t\t\t\t\t\t\t\t<!-- 功能分别是：点击图片显示详情， 购物车的数量，加入购物车，等等 -->\r\n\t\t\t\t\t\t\t\t\t\t<actions :materials-btn=\"!product.is_single\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t@materials=\"showProductDetailModal(product)\"  \r\n\t\t\t\t\t\t\t\t\t\t\t\t:number=\"productCartNum(product.id)\"   \r\n\t\t\t\t\t\t\t\t\t\t\t\t@add=\"handleAddToCart(product)\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t@minus=\"handleMinusFromCart(product)\" />\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 商品 end -->\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t\t<!-- 右侧商品列表 end -->\r\n\t\t</view>\r\n\t\t\r\n\t\t\r\n\t\t<!-- 商品详情 modal begin -->\r\n\t\t<!-- <product-modal是一个自定义的组件,用于展示商品详情,具体情况在index目录下的components中> -->\r\n\t\t<product-modal :product=\"product\" \r\n\t\t\t\t\t\t:visible=\"productModalVisible\" \r\n\t\t\t\t\t\t@cancel=\"closeProductDetailModal\" \r\n\t\t\t\t\t\t@add-to-cart=\"handleAddToCartInModal\" \r\n\t\t/>\r\n\t\t<!-- 商品详情 modal end -->\r\n\t\t\r\n\t\t\r\n\t\t<!-- 购物车栏 begin -->\r\n\t\t<!-- 同上，自定义组件 -->\r\n\t\t\r\n\t\t<!-- 注意！这里的:cart=\"cart\" 已经把购物车的列表传递下去了 -->\r\n\t\t<cart-bar :cart=\"cart\" \r\n\t\t\t\t  @add=\"handleAddToCart\" \r\n\t\t\t\t  @minus=\"handleMinusFromCart\"\r\n\t\t\t\t  @clear=\"clearCart\"\r\n\t\t\t\t  @pay=\"pay\"\r\n\t\t/>\r\n\t\t<!-- 购物车栏 end -->\r\n\t\t\r\n\t\t<!-- 自定义组件 -->\r\n\t\t<search :show=\"showSearch\" :categories=\"categories\" @hide=\"showSearch=false\" @choose=\"showProductDetailModal\"></search>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {mapState, mapMutations} from 'vuex'\r\n\timport Actions from './components/actions/actions.vue'\r\n\timport CartBar from './components/cartbar/cartbar.vue'\r\n\timport ProductModal from './components/product-modal/product-modal.vue'\r\n\timport cartPopup from './components/cart-popup/cart-popup.vue'\r\n\timport Search from './components/search/search.vue'\r\n\t\r\n\t\r\n\texport default {\r\n\t\t// 自定义组件说明\r\n\t\tcomponents: {\r\n\t\t\tActions,\r\n\t\t\tCartBar,\r\n\t\t\tProductModal,\r\n\t\t\tcartPopup,\r\n\t\t\tSearch\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcategories:[], \r\n\t\t\t\tcart: [],     //购物车！！！\r\n\t\t\t\tproduct: {},\r\n\t\t\t\tcurrentCategoryId: 0,\r\n\t\t\t\tnotices: [],\r\n\t\t\t\tproductModalVisible: false,\r\n\t\t\t\tcartPopupShow: false,\r\n\t\t\t\tproductsScrollTop: 0,\r\n\t\t\t\tshowSearch: false,\r\n\t\t\t\t// test:0\r\n\t\t\t\tisLogin:false,\r\n\t\t\t\torderType:'takein',\r\n\t\t\t\taddress:{}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t//...mapState(['orderType', 'address']),\r\n\t\t\tproductCartNum() {\t//计算单个饮品添加到购物车的数量\r\n\t\t\t\t//reduce是个累加器，acc是需要返回的，cur是当前元素，cart是一个列表，cur指向cart\r\n\t\t\t\treturn id => this.cart.reduce((acc, cur) => {\r\n\t\t\t\t\t\tif(cur.id === id) {\r\n\t\t\t\t\t\t\treturn acc += cur.number\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn acc\r\n\t\t\t\t\t}, 0)\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync onLoad() {\r\n\t\t\tvar that=this\r\n\t\t\t//this.notices = await this.$api('notices')\r\n\t\t\r\n\t\t\t//引入自己文件夹中的json数据!!!\r\n\t\t\t//this.categories = await this.$api('categories')\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t//重要！！！！！！！\r\n\t\t\t//为什么会出错，因为res.data直接赋值的格式是object，但是我们需要的是列表的形式\r\n\t\t\tconst res= await this.$myRequest({url:'/api/'})\r\n\t\t\t//console.log(res)\r\n\t\t\t//如果直接返回的json就用列表push\r\n\t\t\t// this.categories.push(res.data)\r\n\t\t\t// this.test=66\r\n\t\t\t\r\n\t\t\tthis.categories=res.data.data\r\n\t\t\tthis.address=getApp().globalData.address\r\n\t\t\tthis.orderType=getApp().globalData.orderType\r\n\t\t\t\r\n\t\t\t//console.log(this.categories)\r\n\t\t\t//console.log(this.test)\r\n\t\t\t\r\n\t\t\tthis.currentCategoryId = this.categories.length && this.categories[0].id\r\n\t\t\tthis.isLogin=getApp().globalData.isLogin\r\n\t\t\tthis.$nextTick(() => this.calcSize())\r\n\t\t},\r\n\t\t\r\n\t\t//从下级页面返回的时候会清空购物车\r\n\t\t//偷个懒先这些做\r\n\t\tonShow(){\r\n\t\t\tthis.isLogin=getApp().globalData.isLogin\r\n\t\t\tthis.clearCart()\r\n\t\t\tthis.address=getApp().globalData.address\r\n\t\t\tthis.orderType=getApp().globalData.orderType\r\n\t\t},\r\n\t\t\r\n\t\tmethods: {\r\n\t\t\t\r\n\t\t\t//...mapMutations(['SET_ORDER_TYPE']),\r\n\t\t\t\r\n\t\t\t// getshishi(){\r\n\t\t\t// \tconsole.log('获取shishi的数据')\r\n\t\t\t// \tuni.request({\r\n\t\t\t// \t\turl:\"http://127.0.0.1:8000/api/\",\r\n\t\t\t// \t\tsuccess: res=>{\r\n\t\t\t// \t\t\tconsole.log(res.data)\r\n\t\t\t// \t\t\tthis.categories = res.data\r\n\t\t\t// \t\t\tconsole.log(this.categories)\r\n\t\t\t// \t\t},\r\n\t\t\t// \t\tfail: err=>{\r\n\t\t\t// \t\t\tuni.showToast({\r\n\t\t\t// \t\t\t\ttitle:\"请求失败...\",\r\n\t\t\t// \t\t\t\ticon:\"none\"\r\n\t\t\t// \t\t\t})\r\n\t\t\t// \t\t\tconsole.log(err)\r\n\t\t\t// \t\t}\r\n\r\n\t\t\t// \t})\r\n\t\t\t// },\r\n\t\t\t\r\n\t\t\t// async getshishi(){\r\n\t\t\t// \tconst res= await this.$myRequest({\r\n\t\t\t// \t\turl:'/api/'\r\n\t\t\t// \t})\r\n\t\t\t// \tconsole.log(res)\r\n\t\t\t// \tthis.categories=res.data\r\n\t\t\t// },\r\n\t\t\t// set_address(address){\r\n\t\t\t// \tthis.address=address\r\n\t\t\t// },\r\n\t\t\t\r\n\t\t\tset_order_type(ordertype){\r\n\t\t\t\tthis.orderType=ordertype\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tswitchOrderType() {\r\n\t\t\t\t// if(this.isLogin){\r\n\t\t\t\t// \tif(this.orderType === 'takein') {\r\n\t\t\t\t// \t\tuni.navigateTo({\r\n\t\t\t\t// \t\t\turl: '/pages/addresses/addresses'\r\n\t\t\t\t// \t\t})\r\n\t\t\t\t// \t} else {\r\n\t\t\t\t// \t\tthis.SET_ORDER_TYPE('takein')\r\n\t\t\t\t// \t}\r\n\t\t\t\t// }\r\n\t\t\t\tif(this.isLogin){\r\n\t\t\t\t\tif(this.orderType === 'takein') {\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pages/addresses/addresses'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.set_order_type('takein')\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t    title: '登录提示',\r\n\t\t\t\t\t    content: '您还未登录，是否登录？',\r\n\t\t\t\t\t    success(res) {\r\n\t\t\t\t\t      if (res.confirm) {\r\n\t\t\t\t\t        uni.switchTab({\r\n\t\t\t\t\t        \turl:\"/pages/my/my\"\r\n\t\t\t\t\t        })\r\n\t\t\t\t\t      }\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t  });\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\thandleAddToCart(product) {\t//添加到购物车\r\n\t\t\t\tconst index = this.cart.findIndex(item => {\r\n\t\t\t\t\tif(!product.is_single) {\r\n\t\t\t\t\t\treturn (item.id == product.id) && (item.materials_text == product.materials_text)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn item.id === product.id\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif(index > -1) {\r\n\t\t\t\t\tthis.cart[index].number += (product.number || 1)\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.cart.push({\r\n\t\t\t\t\tid: product.id,\r\n\t\t\t\t\tcate_id: product.category_id,\r\n\t\t\t\t\tname: product.name,\r\n\t\t\t\t\tprice: product.price,\r\n\t\t\t\t\tnumber: product.number || 1,\r\n\t\t\t\t\timage: product.images[0].url,\r\n\t\t\t\t\tis_single: product.is_single,\r\n\t\t\t\t\tmaterials_text: product.materials_text || ''\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thandleMinusFromCart(product) { //从购物车减商品\r\n\t\t\t\tlet index\r\n\t\t\t\tif(product.is_single) {\r\n\t\t\t\t   index = this.cart.findIndex(item => item.id == product.id)\r\n\t\t\t\t} else {\r\n\t\t\t\t   index = this.cart.findIndex(item => (item.id == product.id) && (item.materials_text == product.materials_text))\r\n\t\t\t\t}\r\n\t\t\t\tthis.cart[index].number -= 1\r\n\t\t\t\tif(this.cart[index].number <= 0) {\r\n\t\t\t\t\tthis.cart.splice(index, 1)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshowProductDetailModal(product) {//显示购物车组件，未登录则不显示\r\n\t\t\t\tif(this.isLogin){\r\n\t\t\t\t\tthis.product = product\r\n\t\t\t\t\tthis.productModalVisible = true\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t    title: '登录提示',\r\n\t\t\t\t\t    content: '您还未登录，是否登录？',\r\n\t\t\t\t\t    success(res) {\r\n\t\t\t\t\t      if (res.confirm) {\r\n\t\t\t\t\t        uni.switchTab({\r\n\t\t\t\t\t        \turl:\"/pages/my/my\"\r\n\t\t\t\t\t        })\r\n\t\t\t\t\t      }\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t  });\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\thandleAddToCartInModal(product) {\r\n\t\t\t\tthis.handleAddToCart(product)\r\n\t\t\t\tthis.closeProductDetailModal()\r\n\t\t\t},\r\n\t\t\tcloseProductDetailModal() {\r\n\t\t\t\tthis.productModalVisible = false\r\n\t\t\t\tthis.product = {}\r\n\t\t\t},\r\n\t\t\topenCartDetailsPopup() {\r\n\t\t\t\tthis.$refs['cartPopup'].open()\r\n\t\t\t},\r\n\t\t\tclearCart() {\r\n\t\t\t\tthis.cart = []\r\n\t\t\t},\r\n\t\t\t// 改变左侧菜单栏的选中状态\r\n\t\t\thandleMenuSelected(id) {\r\n\t\t\t\t//点击左侧栏，传入id，去categories里面找到一个id与当前点击相同的那一项(比如点了盖饭，则去找盖饭的id)\r\n\t\t\t\tthis.productsScrollTop = this.categories.find(item => item.id == id).top\r\n\t\t\t\tthis.$nextTick(() => this.currentCategoryId = id)\r\n\t\t\t},\r\n\t\t\tproductsScroll({detail}) {\r\n\t\t\t\tconst {scrollTop} = detail\r\n\t\t\t\tlet tabs = this.categories.filter(item=> item.top <= scrollTop).reverse()\r\n\t\t\t\tif(tabs.length > 0){\r\n\t\t\t\t\tthis.currentCategoryId = tabs[0].id\r\n\t\t\t\t}\r\n\t\t\t\t//console.log(this.currentCategoryId)\r\n\t\t\t\t//显示未定义，又是this的指向问题！！！\r\n\t\t\t\t//console.log(this.productsScrollTop)\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 不知道拿来干嘛的,但最好别注释\r\n\t\t\tcalcSize() {\r\n\t\t\t\tlet h = 0\r\n\t\t\t\tlet view = uni.createSelectorQuery().select('#ads')\r\n\t\t\t\tview.fields({\r\n\t\t\t\t\tsize: true\r\n\t\t\t\t}, data => {\r\n\t\t\t\t\th += data?Math.floor(data.height):0\r\n\t\t\t\t\t// h += Math.floor(data.height)\r\n\t\t\t\t}).exec()\r\n\t\t\t\t\r\n\t\t\t\tthis.categories.forEach(item => {\r\n\t\t\t\t\tlet view = uni.createSelectorQuery().select(`#products-${item.id}`)\r\n\t\t\t\t\tview.fields({\r\n\t\t\t\t\t\tsize: true\r\n\t\t\t\t\t}, data => {\r\n\t\t\t\t\t\titem.top = h\r\n\t\t\t\t\t\t// let h = rect?rect.height:0 报错：需要检验是否存在\r\n\t\t\t\t\t\th += data?Math.floor(data.height):0\r\n\t\t\t\t\t\t// h += Math.floor(data.height)\r\n\t\t\t\t\t\titem.bottom = h\r\n\t\t\t\t\t}).exec()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tpay() {\r\n\t\t\t\t//同步缓存\r\n\t\t\t\t//即购物车这个东西是不需要存到数据库的，但是又很多地方需要他\r\n\t\t\t\t//因此cart缓存到本地\r\n\t\t\t\tuni.setStorageSync('cart', this.cart)\r\n\t\t\t\t//这种跳转方式是可以返回的，因此返回的时候发现购物车没有消失\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/pay/pay'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<!-- 注册样式可以写成.scss的格式分开成另一个文件，再用import进行引入即可 -->\r\n<style lang=\"scss\">\r\n\t@import './index.scss';\r\n</style>\r\n","import mod from \"-!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\火狐下载\\\\HBuilderX.3.2.2.20210818\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1629895095707\n      var cssReload = require(\"E:/火狐下载/HBuilderX.3.2.2.20210818/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}